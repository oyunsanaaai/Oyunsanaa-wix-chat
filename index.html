<!doctype html>
<html lang="mn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OyunSanaa Chat</title>
<style>
:root{
  --brand:#486573; /* –µ—Ä”©–Ω—Ö–∏–π –Ω–æ–≥–æ–æ–Ω */
  --bg:#fff; --text:#222; --muted:#8a8a8a; --line:#e5e7eb;
  --user:#E8F0E9; --bot:#fff; --shadow:0 10px 30px rgba(0,0,0,.12);
  --font-ui: Roboto, -apple-system, "Segoe UI", Arial, sans-serif;
  --t-base:16px; --line-compact:1.25;
  --icon-header:#CFE0C9; --icon-menu:#6F8B62;
}

/* –ë“Æ–¢–≠–ù –î–≠–õ–ì–≠–¶ –•–£–£–î–ê–° */
html,body{height:100%;margin:0;background:var(--bg);color:var(--text)}
.oy-page{position:relative;min-height:100dvh;display:flex;flex-direction:column}

/* –¢–û–õ–ì–û–ô */
.oy-header{position:sticky;top:0;height:52px;background:var(--brand);color:#fff;
  display:flex;align-items:center;z-index:5}
.oy-iconbtn{background:transparent;border:none;color:var(--icon-header);cursor:pointer;
  width:44px;height:44px;display:grid;place-items:center}
.oy-iconbtn svg{width:18px;height:18px}
.oy-title{flex:1;text-align:center;font:400 var(--t-base)/1.2 var(--font-ui);
  padding:0 6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* DRAWER (–∑“Ø“Ø–Ω—ç—ç—Å —à—É—Ä–≥—É—É–ª–Ω–∞) */
.oy-drawer{position:fixed;inset:52px auto 0 0;width:min(84%,320px);background:#fff;
  border-right:1px solid var(--line);transform:translateX(-102%);transition:transform .25s ease;
  display:flex;flex-direction:column;z-index:6;box-shadow:0 10px 30px rgba(0,0,0,.08)}
.oy-drawer.open{transform:translateX(0)}
.oy-menu{flex:1;overflow:auto;padding:8px;-webkit-overflow-scrolling:touch}

/* MENU item */
.oy-item{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;
  cursor:pointer;border:1px solid var(--line);background:#fff;margin:6px 4px;transition:background .15s}
.oy-item:hover{background:#f9f9fb}
.oy-item:focus-visible{outline:2px solid color-mix(in srgb, var(--brand) 60%, white);outline-offset:2px}
.oy-item .i{width:18px;height:18px;flex:0 0 18px;display:grid;place-items:center;color:var(--icon-menu)}
.oy-item .i svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:1.6;stroke-linecap:round;stroke-linejoin:round}
.oy-item .t{flex:1;font:400 var(--t-base)/var(--line-compact) var(--font-ui)}

/* –ß–ê–¢ –ë“Æ–õ–≠–ì */
.oy-chat{position:relative;flex:1;background:#fafafa;overflow:auto;
  -webkit-overflow-scrolling:touch;overscroll-behavior:contain}
.oy-stream{padding:12px 12px 100px;max-width:720px;margin:0 auto}
.oy-bubble{max-width:84%;padding:10px 12px;border-radius:20px;margin:6px 0;
  font:14px/1.45 var(--font-ui);box-shadow:0 13px 28px rgba(0,0,0,.10)}
.oy-bot{background:var(--bot);border:1px solid var(--line);border-top-left-radius:6px}
.oy-user{background:var(--user);border:1px solid var(--line);border-top-right-radius:6px;margin-left:auto}
.oy-meta{color:var(--muted);font:11px var(--font-ui);margin:2px 0 0}

/* COMPOSER */
.oy-composer{position:sticky;bottom:0;left:0;right:0;background:#fff;border-top:1px solid var(--line);
  padding-bottom:max(8px, env(safe-area-inset-bottom)); z-index:4}
.oy-row{display:grid;grid-template-columns:28px 1fr 72px;gap:8px;padding:8px;align-items:center;max-width:720px;margin:0 auto}
.oy-file{width:20px;height:20px;display:grid;place-items:center;border:1px dashed var(--line);
  border-radius:14px;background:#fff;cursor:pointer;color:var(--brand)}
.oy-textarea{min-height:42px;max-height:120px;resize:none;border:1px solid var(--line);border-radius:16px;
  padding:10px 12px;font:14px/1.35 var(--font-ui);outline:none;background:#fdfdfd;
  -webkit-tap-highlight-color:transparent;touch-action:manipulation}
.oy-send{height:40px;border:none;background:var(--brand);color:#fff;border-radius:14px;
  padding:0 14px;cursor:pointer;transition:background .15s, opacity .15s}
.oy-send:disabled{opacity:.55;cursor:not-allowed}

/* –êccessibility / Hover */
.oy-iconbtn:hover{background:#0000000d;border-radius:10px}
.oy-send:focus-visible,.oy-iconbtn:focus-visible,.oy-item:focus-visible{
  outline:2px solid color-mix(in srgb, var(--brand) 60%, white);outline-offset:2px;border-radius:12px}

/* EMBED –≥–æ—Ä–∏–º: Wix –¥–æ—Ç–æ—Ä iframe-—ç—ç—Ä —Å—É—É—Ö “Ø–µ–¥ —Ç–æ–ª–≥–æ–π/—à—É—Ä–≥—É—É–ª–≥—ã–≥ –Ω—É—É—Ö */
:root[data-embed="1"] .oy-header,
:root[data-embed="1"] .oy-drawer{display:none}
:root[data-embed="1"] .oy-chat{padding-top:0}

/* DARK MODE (—Å–∞–Ω–∞–ª) */
@media (prefers-color-scheme: dark){
  :root{ --bg:#121416; --text:#f3f5f7; --bot:#181b1e; --user:#1d2a22; --line:#24282d; --muted:#a9b1b8 }
  .oy-chat{background:#16191c}
  .oy-composer{background:#181b1e;border-top-color:#24282d}
}
</style>
</head>
<body>
  <div class="oy-page">
    <!-- –¢–æ–ª–≥–æ–π -->
    <header class="oy-header" id="oyHeader">
      <button class="oy-iconbtn" id="btnDrawer" aria-label="–¶—ç—Å">
        <svg viewBox="0 0 24 24"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
      <div class="oy-title">OyunSanaa Chat</div>
      <span class="oy-iconbtn" aria-hidden="true" style="opacity:0;pointer-events:none"></span>
    </header>

    <!-- Drawer -->
    <aside class="oy-drawer" id="oyDrawer">
      <div class="oy-menu" id="oyMenu"></div>
    </aside>

    <!-- –ß–∞—Ç -->
    <main class="oy-chat">
      <div class="oy-stream" id="oyStream">
        <div class="oy-bubble oy-bot">–°–∞–π–Ω –±–∞–π–Ω–∞ —É—É! üëã –≠–Ω–¥—ç—ç—Å –∑–∞—Ö–∏–∞–≥–∞–∞ –±–∏—á—ç—ç—Ä—ç–π.</div>
      </div>

      <div class="oy-composer">
        <div class="oy-row">
          <button class="oy-file" id="oyFile" title="–§–∞–π–ª"></button>
          <textarea class="oy-textarea" id="oyInput" placeholder="–≠–Ω–¥ –±–∏—á... (Shift+Enter = —à–∏–Ω—ç –º”©—Ä)"></textarea>
          <button class="oy-send" id="oySend">–ò–ª–≥—ç—ç</button>
        </div>
      </div>
    </main>
  </div>

<script>
/* ====== –¢–£–°–õ–ê–• ====== */
const $ = s => document.querySelector(s);

/* ====== DRAWER ====== */
const drawer = $('#oyDrawer');
const btnDrawer = $('#btnDrawer');
if (btnDrawer && drawer){
  btnDrawer.addEventListener('click', ()=> drawer.classList.toggle('open'));
}

/* ====== 9 –¶–≠–°: –∞–≤—Ç–æ–º–∞—Ç–∞–∞—Ä “Ø“Ø—Å–≥—ç–Ω—ç ====== */
const OY_MENU_ITEMS = [
  { id:'home',     title:'–ù“Ø“Ø—Ä',            href:'/' },
  { id:'programs', title:'–•”©—Ç”©–ª–±”©—Ä“Ø“Ø–¥',     href:'/programs' },
  { id:'ages',     title:'–ù–∞—Å–Ω—ã –∞–Ω–≥–∏–ª–∞–ª',   href:'/ages' },
  { id:'guides',   title:'–ì–∞—Ä—ã–Ω –∞–≤–ª–∞–≥–∞',    href:'/guides' },
  { id:'mind',     title:'–û—é—É–Ω —Å–∞–Ω–∞–∞',      href:'/mind' },
  { id:'heart',    title:'–ó“Ø—Ä—Ö —Å—ç—Ç–≥—ç–ª',     href:'/heart' },
  { id:'health',   title:'–≠—Ä“Ø“Ø–ª –∞–º—å–¥—Ä–∞–ª',   href:'/health' },
  { id:'pricing',  title:'–¢”©–ª–±”©—Ä',          href:'/pricing' },
  { id:'settings', title:'–¢–æ—Ö–∏—Ä–≥–æ–æ',        href:'/settings' },
];
const OY_ICON = <svg viewBox="0 0 24 24"><path d="M4 12h16M4 6h16M4 18h16" stroke="currentColor" fill="none" stroke-width="1.6" stroke-linecap="round"/></svg>;
(function renderMenu(){
  const wrap = $('#oyMenu'); if (!wrap) return;
  wrap.innerHTML = '';
  OY_MENU_ITEMS.forEach(item=>{
    const btn = document.createElement('button');
    btn.className = 'oy-item'; btn.type='button';
    btn.innerHTML = <span class="i">${OY_ICON}</span><span class="t">${item.title}</span>;
    btn.addEventListener('click', ()=> { if(item.href) location.href = item.href; });
    wrap.appendChild(btn);
  });
})();

/* ====== –ß–ê–¢ COMPOSER ====== */
const input = $('#oyInput');
const sendBtn = $('#oySend');
const stream = $('#oyStream');

function autoSize(){
  if (!input) return;
  input.style.height = 'auto';
  const max = parseInt(getComputedStyle(input).getPropertyValue('max-height')) || 120;
  input.style.height = Math.min(input.scrollHeight, max) + 'px';
}
if (input){
  input.addEventListener('input', autoSize);
  window.addEventListener('resize', autoSize);
  autoSize();
}

function sendMessage(){
  const text = (input?.value || '').trim();
  if (!text) return;
  const me = document.createElement('div');
  me.className = 'oy-bubble oy-user';
  me.textContent = text;
  stream.appendChild(me);

  // TODO: —ç–Ω–¥ ”©”©—Ä–∏–π–Ω backend/WebSocket —Ä—É—É –∏–ª–≥—ç—ç–Ω—ç
  // fetch('/api/send', {method:'POST', body: JSON.stringify({text})})

  input.value = '';
  autoSize();
  stream.scrollTop = stream.scrollHeight;
}
if (sendBtn) sendBtn.addEventListener('click', sendMessage);
if (input){
  input.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' && !e.shiftKey){
      e.preventDefault();
      sendMessage();
    }
  });
}

/* ====== EMBED –≥–æ—Ä–∏–º (Wix –¥–æ—Ç–æ—Ä iframe-—ç—ç—Ä) ====== */
const qs = new URLSearchParams(location.search);
if (qs.get('embed') === '1'){
  document.documentElement.setAttribute('data-embed','1');
}

/* ====== iOS 100dvh —Ö–∞–º–≥–∞–∞–ª–∞–ª—Ç (—Å–æ–Ω–≥–æ–ª—Ç) ====== */
let vhTick;
window.addEventListener('resize', ()=>{
  clearTimeout(vhTick);
  vhTick = setTimeout(()=>{
    document.body.style.setProperty('--vh', window.innerHeight * 0.01 + 'px');
  }, 120);
});
</script>
</body>
</html>
Write to Enkh-Oyun Baasankhuu
